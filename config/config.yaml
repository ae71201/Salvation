
mixed-port: 7893 # HTTP(S)ï¼ŒSOCKS
allow-lan: true
log-level: silent
external-controller: 0.0.0.0:9090
secret: '123456'
bind-address: "*"
external-ui: /etc/mihomo/ui
external-ui-name: xd
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"
mode: rule #è§„åˆ™æ¨¡å¼
geox-url:
  geoip: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.metadb"
geo-auto-update: false
geo-update-interval: 720
find-process-mode: strict
global-client-fingerprint: chrome
ipv6: false
tcp-concurrent: false #TCPå¹¶å‘
tun:
  enable: true
  stack: mixed # gvisor/system
  dns-hijack:
    - 0.0.0.0:53
  auto-detect-interface: true # è‡ªåŠ¨è¯†åˆ«å‡ºå£ç½‘å¡
  auto-route: true # é…ç½®è·¯ç”±è¡¨
  auto-redirect: true # è‡ªåŠ¨é…ç½® iptables ä»¥é‡å®šå‘TCPè¿æ¥ï¼Œä»…æ”¯æŒLinux
  strict-route: false # linuxï¼šè®©ä¸æ”¯æŒçš„ç½‘ç»œæ— æ³•åˆ°è¾¾ï¼Œå°†æ‰€æœ‰è¿æ¥è·¯ç”±åˆ° tun
  route-exclude-address-set: #åŒ¹é…çš„æµé‡å°†ç»•è¿‡è·¯ç”±ï¼Œéœ€è¦ nftablesã€auto-routeå’Œauto-redirectå·²å¯ç”¨
    - cn_ip
dns:
  cache-algorithm: arc
  enable: true
  ipv6: false
  prefer-h3: false # æ˜¯å¦å¼€å¯ DoH æ”¯æŒ HTTP/3ï¼Œå°†å¹¶å‘å°è¯•
  enhanced-mode: fake-ip # or redir-host
  fake-ip-range: 198.18.0.1/16
  listen: 0.0.0.0:53
  fake-ip-filter:
  - 'rule-set:cn,private'
  - 'rule-set:fakeip-filter'
  - 'www.ddns.eu.org'
  nameserver:
  - 192.168.2.31
  default-nameserver: #ç”¨äºè§£æ DNSæœåŠ¡å™¨ çš„åŸŸå
  - https://223.5.5.5/dns-query
  nameserver-policy: #ä¼˜å…ˆæŸ¥è¯¢
   "rule-set:category-ads-all": 'rcode://success'
profile:
  store-selected: true # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©
  store-fake-ip: true # å‚¨å­˜ fakeip æ˜ å°„è¡¨
#####   é”šç‚¹ start   #####
pr: &pr {type: select, proxies: [DIRECT,'â™»ï¸','ğŸ‡­ğŸ‡° é¦™æ¸¯','ğŸ‡­ğŸ‡° æ•£åˆ—','ğŸ‡¹ğŸ‡¼ å°æ¹¾','ğŸ‡¯ğŸ‡µ æ—¥æœ¬','ğŸ‡ºğŸ‡¸ ç¾å›½','ğŸ‡¦ğŸ‡º æ¾³æ´²','ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡','ğŸŒ']} #ç­–ç•¥ç»„ç›¸å…³
p: &p {type: http, interval: 10800, health-check: {enable: true, url: https://www.gstatic.com/generate_204, interval: 180}} #è®¢é˜…æ›´æ–°&å»¶è¿Ÿæµ‹è¯•ç›¸å…³
#####   é”šç‚¹ end   #####
proxy-providers:
  Biteb:
    <<: *p
    url: "è®¢é˜…è¿æ¥"
proxies:
proxy-groups:
 - {name: 'â™»ï¸', type: url-test, include-all: true, tolerance: 30}
 - {name: 'ğŸŒ', type: select, include-all: true}
 - {name: 'ğŸŸ', <<: *pr}
 - {name: 'ğŸ‡§', <<: *pr}
 - {name: 'â–¶', <<: *pr}
 - {name: 'â„', <<: *pr}
 - {name: 'ğŸ‡¨ğŸ‡³', <<: *pr}
 - {name: 'â“‚', <<: *pr}
 - {name: 'âœˆ', <<: *pr}
 - {name: 'ğŸ‡¬', <<: *pr}
 - {name: 'ğŸ', <<: *pr}
 - {name: 'ğŸ”', <<: *pr}
 - {name: 'âš¡', <<: *pr}
 - {name: 'ğŸ¤–', <<: *pr}
#ç­–ç•¥ç»„
 - {name: 'ğŸ‡­ğŸ‡° é¦™æ¸¯', type: url-test, include-all: true, filter: "(?i)Hong|é¦™æ¸¯|HK"}
 - {name: 'ğŸ‡¹ğŸ‡¼ å°æ¹¾', type: url-test, include-all: true, filter: "(?i)Taiwan|å°æ¹¾|å°åŒ—|æ–°åŒ—|å½°åŒ–|TW"}
 - {name: 'ğŸ‡¦ğŸ‡º æ¾³æ´²', type: url-test, include-all: true, filter: "(?i)æ¾³|æ¾³æ´²|AU"}
 - {name: 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬', type: url-test, include-all: true, filter: "(?i)Japan|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|JP"}
 - {name: 'ğŸ‡ºğŸ‡¸ ç¾å›½', type: url-test, include-all: true, filter: "(?i)United States|ç¾å›½|ç¡…è°·|æ´›æ‰çŸ¶|è¥¿é›…å›¾|åœ£ä½•å¡|US"}
 - {name: 'ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡', type: url-test, include-all: true, filter: "(?i)Singapore|æ–°åŠ å¡|ç‹®åŸ|SG"}
 - {name: 'ğŸ‡­ğŸ‡° æ•£åˆ—',type: load-balance,strategy: consistent-hashing,include-all: true,hidden: true,filter: "(?i)Hong|é¦™æ¸¯|HK"}
rules:
- RULE-SET, category-ads-all, REJECT
- RULE-SET, AEdirect, DIRECT
- RULE-SET, AEproxy, ğŸŸ
- RULE-SET, bing, ğŸ‡§
- RULE-SET, private, DIRECT
- RULE-SET, private_ip, DIRECT, no-resolve
#- RULE-SET, cn, DIRECT
#- RULE-SET, cn_ip, DIRECT, no-resolve
- RULE-SET, apple@cn, ğŸ
- RULE-SET, telegram_ip, âœˆ, no-resolve
- RULE-SET, telegram, âœˆ
- RULE-SET, blizzard, â„
- RULE-SET, speedtest, âš¡
- RULE-SET, openai, ğŸ¤–
- RULE-SET, github, ğŸŸ
- RULE-SET, microsoft, â“‚
- RULE-SET, youtube, â–¶
- RULE-SET, google, ğŸ‡¬
- RULE-SET, google_ip, ğŸ‡¬, no-resolve
- RULE-SET, pornhub, ğŸ”
- RULE-SET, geolocation-!cn, ğŸŸ
- MATCH, ğŸ‡¨ğŸ‡³
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
rule-providers:
  AEproxy: {type: http,behavior: domain,interval: 86400,url: "https://raw.githubusercontent.com/ae71201/mihomo/main/rules/AEproxy.yaml"}
  AEdirect: {type: http,behavior: domain,interval: 86400,url: "https://raw.githubusercontent.com/ae71201/mihomo/main/rules/AEdirect.yaml"}
  fakeip-filter:
    <<: *domain
    url: "https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash-ruleset/fakeip-filter.mrs"
  category-ads-all:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ads-all.mrs"
  private:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"
  cn:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"
  blizzard:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/blizzard.mrs"
  apple@cn:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple@cn.mrs"
  bing:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bing.mrs"
  microsoft:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs"
  speedtest:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/speedtest.mrs"
  pornhub:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/pornhub.mrs"
  github:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"
  youtube:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"
  google:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"
  telegram:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"
  openai:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/openai.mrs"
  geolocation-!cn:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs"
  private_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs"
  cn_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"
  google_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"
  telegram_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs"
