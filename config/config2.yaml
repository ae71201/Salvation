mixed-port: 7893 # HTTP(S)ï¼ŒSOCKS
allow-lan: true
log-level: silent
bind-address: "*"
mode: rule  # è§„åˆ™æ¨¡å¼
find-process-mode: strict
global-client-fingerprint: chrome
external-controller: 0.0.0.0:9090
secret: '123456'
external-ui: /etc/mihomo/ui
external-ui-name: xd
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"
keep-alive-idle: 600     # ç©ºé—²æ—¶é—´ å‡å°‘ç§»åŠ¨è®¾å¤‡è€—ç”µé—®é¢˜
keep-alive-interval: 15  # é—´éš”æ—¶é—´ 
tun:
  enable: true
  stack: mixed            # gvisor/system
  dns-hijack:
    - 0.0.0.0:53
  auto-detect-interface: true # è‡ªåŠ¨è¯†åˆ«å‡ºå£ç½‘å¡
  auto-route: true            # é…ç½®è·¯ç”±è¡¨
  auto-redirect: true         # è‡ªåŠ¨é…ç½® iptables ä»¥é‡å®šå‘TCPè¿æ¥ï¼Œä»…æ”¯æŒLinux
  route-exclude-address-set:  # åŒ¹é…çš„æµé‡å°†ç»•è¿‡è·¯ç”±ï¼Œéœ€è¦ nftablesã€auto-routeå’Œauto-redirectå·²å¯ç”¨
    - cn_ip
dns:
  cache-algorithm: arc
  enable: true
  ipv6: true
  respect-rules: false   #dns è¿æ¥éµå®ˆè·¯ç”±è§„åˆ™ï¼Œéœ€é…ç½® proxy-server-nameserver
  enhanced-mode: fake-ip # or redir-host
  fake-ip-range: 198.18.0.1/16
  listen: 0.0.0.0:53
  fake-ip-filter:
  - rule-set:cn,private,microsoft@cn
  - rule-set:fakeip-filter
  nameserver:
  - 192.168.2.31
  default-nameserver:  #ç”¨äºè§£æ DNSæœåŠ¡å™¨ çš„åŸŸå
  - https://223.5.5.5/dns-query
  nameserver-policy:   #ä¼˜å…ˆæŸ¥è¯¢
   "rule-set:category-ads-all": 'rcode://success'
profile:
  store-selected: true # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©
  store-fake-ip: true  # å‚¨å­˜ fakeip æ˜ å°„è¡¨
#####   é”šç‚¹ start   #####
pr: &pr {type: select, proxies: [DIRECT,'â™»ï¸','ğŸ‡­ğŸ‡° é¦™æ¸¯','ğŸ‡­ğŸ‡° æ•£åˆ—','ğŸ‡¹ğŸ‡¼ å°æ¹¾','ğŸ‡¯ğŸ‡µ æ—¥æœ¬','ğŸ‡ºğŸ‡¸ ç¾å›½','ğŸ‡ºğŸ‡¸ æ•£åˆ—','ğŸ‡¦ğŸ‡º æ¾³æ´²','ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡','ğŸŒ']} #ç­–ç•¥ç»„ç›¸å…³
p: &p {type: http, interval: 10800, health-check: {enable: true, url: https://www.gstatic.com/generate_204, interval: 180}} #è®¢é˜…æ›´æ–°&å»¶è¿Ÿæµ‹è¯•ç›¸å…³
#####   é”šç‚¹ end   #####
proxy-providers:
  Biteb:
    <<: *p
    url: "æœºåœºè®¢é˜…é“¾æ¥"
proxies:
proxy-groups:
 - {name: 'â™»ï¸', type: url-test, include-all: true, tolerance: 30}
 - {name: 'ğŸŒ', type: select, include-all: true}
 - {name: 'ğŸŸï¸', <<: *pr}
 - {name: 'ğŸ”', <<: *pr}
 - {name: 'â„', <<: *pr}
 - {name: 'ğŸ‡§', <<: *pr,icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Copilot.png}
 - {name: 'â–¶ï¸', <<: *pr,icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png}
 - {name: 'â“‚', <<: *pr,icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png}
 - {name: 'âœˆ', <<: *pr,icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram.png}
 - {name: 'ğŸ‡¬', <<: *pr,icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png}
 - {name: 'ğŸ', <<: *pr,icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png}
 - {name: 'âš¡', <<: *pr,icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Speedtest.png}
 - {name: 'ğŸ¤–', <<: *pr,icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/ChatGPT.png}
 - {name: 'GitHub', <<: *pr,icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/GitHub.png}
#ç­–ç•¥ç»„
 - {name: 'ğŸ‡­ğŸ‡° é¦™æ¸¯', type: url-test, include-all: true, filter: "(?i)Hong|é¦™æ¸¯|HK"}
 - {name: 'ğŸ‡¹ğŸ‡¼ å°æ¹¾', type: url-test, include-all: true, filter: "(?i)Taiwan|å°æ¹¾|å°åŒ—|æ–°åŒ—|å½°åŒ–|TW"}
 - {name: 'ğŸ‡¦ğŸ‡º æ¾³æ´²', type: url-test, include-all: true, filter: "(?i)æ¾³|æ¾³æ´²|AU"}
 - {name: 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬', type: url-test, include-all: true, filter: "(?i)Japan|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|JP"}
 - {name: 'ğŸ‡ºğŸ‡¸ ç¾å›½', type: url-test, include-all: true, filter: "(?i)United States|ç¾å›½|ç¡…è°·|æ´›æ‰çŸ¶|è¥¿é›…å›¾|åœ£ä½•å¡|US"}
 - {name: 'ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡',type: url-test, include-all: true, filter: "(?i)Singapore|æ–°åŠ å¡|ç‹®åŸ|SG"}
 - {name: 'ğŸ‡­ğŸ‡° æ•£åˆ—',type: load-balance,strategy: consistent-hashing,include-all: true,hidden: true,filter: "(?i)Hong|é¦™æ¸¯|HK"}
 - {name: 'ğŸ‡ºğŸ‡¸ æ•£åˆ—',type: load-balance,strategy: consistent-hashing,include-all: true,hidden: true,filter: "(?i)United States|ç¾å›½|ç¡…è°·|æ´›æ‰çŸ¶|è¥¿é›…å›¾|åœ£ä½•å¡|US"}
rules:
- RULE-SET, category-ads-all, REJECT
- RULE-SET, AEdirect, DIRECT
- RULE-SET, AEproxy, ğŸŸï¸
- RULE-SET, bing, ğŸ‡§
#- RULE-SET, private, DIRECT
- RULE-SET, private_ip, DIRECT, no-resolve
- RULE-SET, apple@cn, ğŸ
- RULE-SET, telegram_ip, âœˆ, no-resolve
- RULE-SET, telegram, âœˆ
- RULE-SET, blizzard, â„
- RULE-SET, speedtest, âš¡
- RULE-SET, openai, ğŸ¤–
- RULE-SET, github, GitHub
- RULE-SET, microsoft@cn, DIRECT
- RULE-SET, microsoft, â“‚
- RULE-SET, youtube, â–¶ï¸
- RULE-SET, google, ğŸ‡¬
- RULE-SET, google_ip, ğŸ‡¬, no-resolve
- RULE-SET, pornhub, ğŸ”
- RULE-SET, geolocation-!cn, ğŸŸï¸
#- RULE-SET, cn, DIRECT
#- RULE-SET, cn_ip, DIRECT, no-resolve
- MATCH, DIRECT
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
rule-providers:
  AEproxy: {type: http,behavior: domain,interval: 86400,url: "https://raw.githubusercontent.com/ae71201/mihomo/main/rules/AEproxy.yaml"}
  AEdirect: {type: http,behavior: domain,interval: 86400,url: "https://raw.githubusercontent.com/ae71201/mihomo/main/rules/AEdirect.yaml"}
  fakeip-filter:
    <<: *domain
    url: "https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash-ruleset/fakeip-filter.mrs"
  category-ads-all:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ads-all.mrs"
  private:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"
  cn:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"
  blizzard:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/blizzard.mrs"
  apple@cn:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple@cn.mrs"
  bing:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bing.mrs"
  microsoft@cn:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft@cn.mrs"
  microsoft:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs"
  speedtest:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/speedtest.mrs"
  pornhub:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/pornhub.mrs"
  github:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"
  youtube:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"
  google:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"
  telegram:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"
  openai:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/openai.mrs"
  geolocation-!cn:
    <<: *domain
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs"
  private_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs"
  cn_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"
  google_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"
  telegram_ip:
    <<: *ip
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs"
